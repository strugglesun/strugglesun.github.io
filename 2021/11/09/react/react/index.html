<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.5"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.5"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><title>react/react | strugglesun的博客</title><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">react/react</h1><a id="logo" href="/.">strugglesun的博客</a><p class="description">不努力,你连试试的机会都没有</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">react/react</h1><div class="post-meta"><a href="/2021/11/09/react/react/#comments" class="comment-count"></a><p><span class="date">Nov 09, 2021</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="jsx语法规则"><a href="#jsx语法规则" class="headerlink" title="jsx语法规则"></a>jsx语法规则</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">        <span class="keyword">var</span> id = <span class="string">'limingyang'</span></span><br><span class="line">        <span class="keyword">var</span> cont = <span class="string">'hello,word'</span></span><br><span class="line">        <span class="keyword">const</span> VM = (</span><br><span class="line">            &lt;div className=<span class="string">'li'</span> id=&#123;id&#125;&gt;</span><br><span class="line">                &lt;h1 style = &#123;&#123;<span class="attr">backgroundColor</span>:<span class="string">'green'</span>&#125;&#125;&gt;&#123;cont&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Good&gt;&lt;/</span>Good&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">        ReactDOM.render(VM,document.getElementById('text'))</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>定义虚拟DOM时，不要写引号</li>
<li>标签中引入JS表达式时要用{}</li>
<li>样式的类名指定不要用class，要用className</li>
<li>内联样式，要用style= 的形式去写</li>
<li>只有一个根标签</li>
<li>标签必须闭合</li>
<li>标签首字母<br>(1)若小写字母开头，则将该标签转为html中同名元素，若html中无该标签对应的同名元素，则报错<br>(2)若大写字母开头，react就去渲染对应的组件，若组件没有定义，则报错</li>
</ul>
<h2 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">    <span class="comment">//1.创建函数式组件</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">Mycompontnet</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>)<span class="comment">//此处的this是undefined,因为babel编译后开启了严格模式</span></span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是函数式组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//渲染组件到页面</span></span><br><span class="line">        ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Mycompontnet</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'text'</span>))</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        执行了ReactDOM.render(&lt;Mycompontnet/&gt;,document.getElementById('text'))之后，发生了什么</span></span><br><span class="line"><span class="comment">            1.React解析组件标签，找到了Mycompontent组件</span></span><br><span class="line"><span class="comment">            2.发现组件是使用函数定义的，随后调用该函数，将返回的虚拟DON转为真实DOM，随后呈现在页面上</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="类的基本知识"><a href="#类的基本知识" class="headerlink" title="类的基本知识"></a>类的基本知识</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个Person类</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(name,age)&#123;</span><br><span class="line">          <span class="keyword">this</span>.name = name</span><br><span class="line">          <span class="keyword">this</span>.age = age</span><br><span class="line">        &#125;</span><br><span class="line">        speak()&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`我叫<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>,我今年<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>了`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'张三'</span>,<span class="number">18</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(p1,p1.speak())</span><br><span class="line">    <span class="comment">//创建一个Student类,继承于Person类</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">         <span class="keyword">constructor</span>(name,age,grade)&#123;</span><br><span class="line">             <span class="keyword">super</span>(name,age)</span><br><span class="line">             <span class="keyword">this</span>.grade = grade</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">//重写父类继承过来的方法</span></span><br><span class="line">         speak()&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`我叫<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>,我今年<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>了,我上<span class="subst">$&#123;<span class="keyword">this</span>.grade&#125;</span>年级了`</span>)</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="string">'李四'</span>,<span class="number">20</span>,<span class="string">'高一'</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(s1.speak())</span><br></pre></td></tr></table></figure>
<p>总结 ：<br>     1.类中的构造器不是必须写的，要对实例进行一些初始化的操作，如添加指定属性时才写<br>     2.如果A类继承了B类，且A类中写了构造器，那么A类中的super是必须要调用的<br>     3.类中所定义的方法，都是放在了类的原型对象上，供实例去使用</p>
<h2 id="对props进行限制"><a href="#对props进行限制" class="headerlink" title="对props进行限制"></a>对props进行限制</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 引入对props进行限制的库 --&gt;</span><br><span class="line">&lt;script src=<span class="string">"./js/prop-types.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>babel<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    class Person extends React.Component&#123;</span></span><br><span class="line"><span class="string">        render()&#123;</span></span><br><span class="line"><span class="string">            const &#123;name,age,sex&#125; = this.props</span></span><br><span class="line"><span class="string">            return (</span></span><br><span class="line"><span class="string">                &lt;ul&gt;</span></span><br><span class="line"><span class="string">                    &lt;li&gt;姓名：&#123;name&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">                    &lt;li&gt;年龄：&#123;age&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">                    &lt;li&gt;性别：&#123;sex&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            )</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    Person.propTypes = &#123;</span></span><br><span class="line"><span class="string">        name:PropTypes.string.isRequired,//限制name属性为字符串类型，并设置必传</span></span><br><span class="line"><span class="string">        age:PropTypes.number,//限制age属性为number类型</span></span><br><span class="line"><span class="string">        sex:PropTypes.string,//限制sex为string类型</span></span><br><span class="line"><span class="string">        speak:PropTypes.func//限制为函数类型</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    Person.defaultProps = &#123;//设置默认值</span></span><br><span class="line"><span class="string">        age:18,</span></span><br><span class="line"><span class="string">        sex:'男'</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    ReactDOM.render(&lt;Person name="</span>tom<span class="string">"  age=&#123;18&#125; sex="</span>男<span class="string">" speak=&#123;speak&#125; /&gt;,document.getElementById('text'))</span></span><br><span class="line"><span class="string">    function speak()&#123;</span></span><br><span class="line"><span class="string">        console.log('我是。。。。')</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="props的简写方式"><a href="#props的简写方式" class="headerlink" title="props的简写方式"></a>props的简写方式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">            <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">            name:PropTypes.string.isRequired,<span class="comment">//限制name属性为字符串类型，并设置必传</span></span><br><span class="line">            age:PropTypes.number,<span class="comment">//限制age属性为number类型</span></span><br><span class="line">            sex:PropTypes.string,<span class="comment">//限制sex为string类型</span></span><br><span class="line">            speak:PropTypes.func<span class="comment">//限制为函数类型</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">static</span> defaultProps = &#123;<span class="comment">//设置默认值</span></span><br><span class="line">            age:<span class="number">18</span>,</span><br><span class="line">            sex:<span class="string">'男'</span></span><br><span class="line">            &#125;</span><br><span class="line">            render()&#123;</span><br><span class="line">                <span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="keyword">this</span>.props</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;ul&gt;</span><br><span class="line">                        &lt;li&gt;姓名：&#123;name&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;li&gt;年龄：&#123;age&#125;&lt;/</span>li&gt;</span><br><span class="line">                        &lt;li&gt;性别：&#123;sex&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/u</span>l&gt;</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">"tom"</span>  <span class="attr">age</span>=<span class="string">&#123;18&#125;</span> <span class="attr">sex</span>=<span class="string">"男"</span> <span class="attr">speak</span>=<span class="string">&#123;speak&#125;</span> /&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'text'</span>))</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'我是。。。。'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="createRef"><a href="#createRef" class="headerlink" title="createRef"></a>createRef</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">            inputRef = React.createRef()</span><br><span class="line">            inputRef2 = React.createRef()</span><br><span class="line">            showData = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.inputRef.current.value)</span><br><span class="line">            &#125;</span><br><span class="line">            showData2 = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.inputRef2.current.value)</span><br><span class="line">            &#125;</span><br><span class="line">            render()&#123;</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;input type=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.inputRef&#125; placeholder=<span class="string">'点击'</span> /&gt;</span><br><span class="line">                        &lt;button onClick=&#123;<span class="keyword">this</span>.showData&#125;&gt;点击&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;input onBlur=&#123;this.showData2&#125; ref=&#123;this.inputRef2&#125; type="text" placeholder='失去焦点'/</span>&gt;</span><br><span class="line">                    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">                )</span></span><br><span class="line"><span class="regexp">            &#125;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        ReactDOM.render(&lt;Person/</span>&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'text'</span>))</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="生命周期-旧"><a href="#生命周期-旧" class="headerlink" title="生命周期(旧)"></a>生命周期(旧)</h2><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><pre><code>1.初始化阶段:由ReactDOM.render()出发---初次渲染
    - constructor()
    - compontentWillMount()
    - render()
    - compontentDidMount() ===&gt;常用
         一般在这个钩子中做一些初始化的事，例如：开启定时器、发送网络请求、订阅消息

 2.更新阶段：由组件内部this.setState()或父组件render()出发
    - shouldCompontentUpdate()
    - compontentWillUpdate()
    - render()===&gt;必须
 3.卸载组件：由ReactDom.unmountCompontentAtNode()触发
    - compontentWillUnmount()===&gt;常用
          一般在这个钩子中做一些收尾的事，例如：关闭定时器、取消订阅消息</code></pre><h2 id="生命周期图谱"><a href="#生命周期图谱" class="headerlink" title="生命周期图谱"></a>生命周期图谱</h2><p><img src="https://i.bmp.ovh/imgs/2021/11/32f0dee9a20554e0.png" alt=""></p>
<h2 id="生命周期总结"><a href="#生命周期总结" class="headerlink" title="生命周期总结"></a>生命周期总结</h2><h3 id="重要的钩子"><a href="#重要的钩子" class="headerlink" title="重要的钩子"></a>重要的钩子</h3><pre><code>1.render:初始化渲染或更新渲染调用
2.compontentDidMount:开启监听，发送ajax请求
3.compontentWillUnmount:做一些收尾工作，如清理定时器</code></pre><h3 id="即将废弃的钩子"><a href="#即将废弃的钩子" class="headerlink" title="即将废弃的钩子"></a>即将废弃的钩子</h3><pre><code>1.compontentWillMount
2.compontentWillReceiveProps
3.compontentWillUpdate</code></pre><p>现在使用会出现警告，下一个版本需要加上UNSAFE_前缀才能使用，以后可能会被彻底废用，不建议使用。  </p>
<h2 id="Key的作用"><a href="#Key的作用" class="headerlink" title="Key的作用"></a>Key的作用</h2><p>1.虚拟DOM中key的作用：<br>  1）简单的说：key是虚拟DOM对象的标识，在更新显示时key起着极其重要的作用<br>  2）详细的说：当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】，随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：<br>     a.旧虚拟DOM中找到了与新虚拟DOM相同的key:<br>        1).若虚拟DOM中内容没变，直接使用之前的真实DOM<br>        2).若虚拟DOM中内容变了，则生成新的真实DOM，随后替换掉页面中之前的真实DOM<br>     b.旧虚拟DOM中未找到与新虚拟DOM相同的key<br>        根据数据创建新的真实DOM，随后渲染到页面</p>
<p>2.用index作为key可能会引发的问题：<br>    1.若对数据进行：逆序添加、逆序删除等破坏顺序操作：<br>         会产生没有必要的真实DOM更新 ===&gt;界面效果没问题，但效率低</p>
<pre><code>2.如果结构中还包含输入类的DOM：
     会产生错误DOM更新 ===&gt;界面有问题
3.注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表展示，使用index作为key是没有问题的</code></pre><p>3.开发中如何选择key?<br>    1.最好使用每条数据的唯一标识作为key,比如id、手机号、身份证号、学号等唯一值。<br>    2.如果确定只是简单的展示数据,用index也是可以的。</p>
<h2 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>在package.json中追加如下配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"proxy"</span>:<span class="string">"http://localhost:5000"</span></span><br></pre></td></tr></table></figure>
<p>说明:<br>   1.优点:配置简单，前端请求资源时可以不加任何前缀。<br>   2.缺点:不能配置多个代理。<br>   3.工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给5000(优先匹配前端资源)</p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>1.第一步：创建代理配置文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在src下创建配置文件：src/setupProxy.js</span><br></pre></td></tr></table></figure>
<p>2.编写setupProxy.js配置具体代理规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>)</span><br><span class="line"> <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app</span>)</span>&#123;</span><br><span class="line">     app.use(</span><br><span class="line">         proxy(<span class="string">'/api1'</span>,&#123;<span class="comment">//api是需要转发的请求(所有带有api前缀的请求都会转发给5000)</span></span><br><span class="line">             target:<span class="string">'http://localhost:5000'</span>,<span class="comment">//配置转发的目标地址(能返回数据的服务器地址)</span></span><br><span class="line">             changeOrigin:<span class="literal">true</span>,<span class="comment">//控制服务器接收到的请求头中host字段的值</span></span><br><span class="line">             pathRewrite:&#123;<span class="string">'^api1'</span>:<span class="string">''</span>&#125;<span class="comment">//去除请求前缀，抱枕交给后端服务器的是正常请求地址(必须配置)</span></span><br><span class="line">         &#125;),</span><br><span class="line">         proxy(<span class="string">'/api2'</span>,&#123;</span><br><span class="line">             target:<span class="string">'http://localhost:5001'</span>,</span><br><span class="line">             changeOrigin:<span class="literal">true</span>,</span><br><span class="line">             pathRewrite:&#123;<span class="string">'^api2'</span>:<span class="string">''</span>&#125;</span><br><span class="line">         &#125;)</span><br><span class="line">     )</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>说明:<br>    1.优点：可以配置多个代理，可以灵活的控制请求是否走代理。<br>    2.缺点：配置繁琐，前端请求资源时必须加前缀。</p>
<h2 id="路由的基本使用"><a href="#路由的基本使用" class="headerlink" title="路由的基本使用"></a>路由的基本使用</h2><ol>
<li>明确好界面中的导航区、展示区</li>
<li>导航区的a标签改为Link标签 <Link to='/xxxx'>Demo</Link></li>
<li>展示区写Route标签进行路径的匹配 <Route path="/xxxx" compontent = {Demo}/></li>
<li><App>的最外侧包裹了一个<BrowserRouter>或者<HashRouter></li>
</ol>
<h2 id="Switch的使用"><a href="#Switch的使用" class="headerlink" title="Switch的使用"></a>Switch的使用</h2><ol>
<li>通常情况下,path和compontent屎一一对应的关系。</li>
<li>Switch可以提高路由匹配效率(单一匹配)</li>
</ol>
<h2 id="解决多级路径刷新页面样式丢失的问题"><a href="#解决多级路径刷新页面样式丢失的问题" class="headerlink" title="解决多级路径刷新页面样式丢失的问题"></a>解决多级路径刷新页面样式丢失的问题</h2><ol>
<li>public/index.html 中引入样式时不写 ./写 / (常用)</li>
<li>public/index.html 中 引入样式时不写 ./ 写 %PUBLIC_URL% (常用) 只适用于react</li>
<li>使用HashRouter</li>
</ol>
<h2 id="路由的严格匹配与模糊匹配"><a href="#路由的严格匹配与模糊匹配" class="headerlink" title="路由的严格匹配与模糊匹配"></a>路由的严格匹配与模糊匹配</h2><ol>
<li>默认使用的是模糊匹配(简单记：【输入的路径】必须包含要【匹配的路径】。且顺序要一致)</li>
<li>开启严格匹配,<Route exact path="/about" compontent={about}></li>
<li>严格匹配不要随便开启,需要再开,有时候开启会导致无法继续匹配二级路由</li>
</ol>
<h2 id="Redirect的使用"><a href="#Redirect的使用" class="headerlink" title="Redirect的使用"></a>Redirect的使用</h2><ol>
<li>一般写在所有路由注册的最下方,当所有路由都无法匹配时,跳转到Redirect指定的路由</li>
<li>具体编码:<Switch>
   <Route path="/about" compontent={About}>
   <Route path="/home" compontent={Home}>
   <Redirect to='/about'>
</Switch>

</li>
</ol>
<h2 id="向路由组件传递参数"><a href="#向路由组件传递参数" class="headerlink" title="向路由组件传递参数"></a>向路由组件传递参数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1.</span> params参数</span><br><span class="line">     路由链接(携带参数) : <span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/demo/test/tom/18'</span>&gt;</span>详情<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line">     注册路由(声明接收) : <span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/demo/test/:name/:age'</span> <span class="attr">compontent</span>=<span class="string">&#123;Test&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">     接收参数 : this.props.match.params</span></span><br><span class="line"><span class="xml">2. search参数</span></span><br><span class="line"><span class="xml">     路由链接(携带参数) : <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/demo/test?name=tom&amp;age=18'</span>&gt;</span>详情<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line">     注册路由(无需声明,正常注册即可) : &lt;Route path='/demo/test' compontent=&#123;Test&#125;&gt;</span><br><span class="line">     接收参数 : this.props.location.search</span><br><span class="line">     备注 : 获取到的search是urlencoded编码字符串，需要借助querystring解析</span><br><span class="line">3. state参数</span><br><span class="line">     路由链接(携带参数) : &lt;Link to=&#123;&#123;pathname:'/demo/test',state:&#123;name:'tom',age:18&#125;&#125;&#125;&gt;详情&lt;/Link&gt;</span><br><span class="line">     注册路由(无需声明,正常注册即可) : &lt;Route path='/demo/test' compontent=&#123;Test&#125;&gt;</span><br><span class="line">     接收参数 : this.props.location.state</span><br><span class="line">     备注 : 在本页面刷新也可保留住参数,清除缓存无法保留住参数</span><br></pre></td></tr></table></figure>

<h2 id="BrowserRouter与HashRouter的区别"><a href="#BrowserRouter与HashRouter的区别" class="headerlink" title="BrowserRouter与HashRouter的区别"></a>BrowserRouter与HashRouter的区别</h2><ol>
<li>底层原理不一样:<br> BrowserRouter使用的是H5的History API,不兼容IE9及以下版本.<br> HashRouter使用的是URL的哈希值。</li>
<li>path表现形式不一样<br> BrowserRouter的路径中没有#,例如:localhost:3000/demo/test<br> HashRouter的路径中包含#,例如: localhost:3000/#/demo/test</li>
<li>刷新后对路由state参数的影响<br> (1).BrowserRouter没有任何影响,因为state保存在history对象中。<br> (2).HashRouter刷新后会导致路由参数的丢失!!!</li>
<li>备注: HashRouter可以用于解决一些路径错误的相关问题</li>
</ol>
</div><div class="post-copyright"><blockquote><p>原文作者: strugglesun</p><p>原文链接: <a href="http://yoursite.com/2021/11/09/react/react/">http://yoursite.com/2021/11/09/react/react/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2021/09/16/react/react1/" class="next">react/react1</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#jsx语法规则"><span class="toc-text">jsx语法规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数式组件"><span class="toc-text">函数式组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类的基本知识"><span class="toc-text">类的基本知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对props进行限制"><span class="toc-text">对props进行限制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#props的简写方式"><span class="toc-text">props的简写方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#createRef"><span class="toc-text">createRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生命周期-旧"><span class="toc-text">生命周期(旧)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生命周期图谱"><span class="toc-text">生命周期图谱</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生命周期总结"><span class="toc-text">生命周期总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#重要的钩子"><span class="toc-text">重要的钩子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#即将废弃的钩子"><span class="toc-text">即将废弃的钩子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Key的作用"><span class="toc-text">Key的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置代理"><span class="toc-text">配置代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#方法一"><span class="toc-text">方法一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法二"><span class="toc-text">方法二</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#路由的基本使用"><span class="toc-text">路由的基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Switch的使用"><span class="toc-text">Switch的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解决多级路径刷新页面样式丢失的问题"><span class="toc-text">解决多级路径刷新页面样式丢失的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#路由的严格匹配与模糊匹配"><span class="toc-text">路由的严格匹配与模糊匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redirect的使用"><span class="toc-text">Redirect的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#向路由组件传递参数"><span class="toc-text">向路由组件传递参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BrowserRouter与HashRouter的区别"><span class="toc-text">BrowserRouter与HashRouter的区别</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/11/09/react/react/">react/react</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/16/react/react1/">react/react1</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/14/%E9%9D%A2%E8%AF%95%E9%A2%98/1.%E4%BB%8E%E8%BE%93%E5%85%A5%E4%B8%80%E4%B8%AAURL%E5%9C%B0%E5%9D%80%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%8C%E6%88%90%E6%B8%B2%E6%9F%93%E7%9A%84%E6%95%B4%E4%B8%AA%E8%BF%87%E7%A8%8B/">面试题/1.从输入一个URL地址到浏览器完成渲染的整个过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/31/node/%E4%BF%AE%E6%94%B9%E5%AE%8C%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF/">node/修改完代码自动重启</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/19/node/node%E6%98%AF%E4%BB%80%E4%B9%88/">node/node是什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/18/vue/%E8%B7%AF%E7%94%B1%E7%9A%84Query%E5%8F%82%E6%95%B0%E5%92%8CParams%E5%8F%82%E6%95%B0%E5%8C%BA%E5%88%AB/">vue/路由的Query参数和Params参数区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/09/vue/vuex%E6%A8%A1%E5%9D%97%E5%8C%96+%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/">vue/vuex模块化+命名空间</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/26/vue/Object.defineProperty/">vue/Object.defineProperty</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/02/%E5%85%B6%E4%BB%96/%E4%BD%A0%E7%9F%A5%E9%81%93WebSocket%E5%90%97/">其他/你知道WebSocket吗</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/02/vue/%E4%BD%A0%E9%83%BD%E5%81%9A%E8%BF%87%E5%93%AA%E4%BA%9BVUE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">vue/你都做过哪些VUE性能优化</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">15</span></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">strugglesun.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.5"></script><div id="fullscreen-img" class="hide"><span class="close"></span></div><script type="text/javascript" src="/js/imgview.js?v=2.0.5" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.5" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>